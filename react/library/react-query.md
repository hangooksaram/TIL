# react-query

## caching

- react-query 에서는 새로운 쿼리 인스턴스가 생성되고, 새로운 네트워크 요청을 보내 데이터를 받으면, 자동적으로 캐시에 해당 쿼리 키값으로 데이터를 저장한다.
- 여기서 `stale` 하냐, `fresh` 하냐에 따라 같은 쿼리키에 해당하는 요청을 네트워크 요청으로 보내느냐, 캐시에 저장된 데이터를 쓰느냐가 갈린다.

### stale / fresh

- `stale` 은 "탁한", "신선하지 않은" 이라는 사전적의미를 지닌다. 즉, 캐시에 있는 데이터가 더이상 신선하지 않기 때문에, `stale` 하다는 것은, 새로운 데이터를 서버에 요청해야한다는 것을 뜻한다.
- `fresh` 하다는 것은 stale 의 반대의 상황이라고 생각하면된다. 캐시에 있는 것이 여전히 신선하다, 즉 사용할 수 있다는 의미이다.

### staleTime

- `staleTime` 만큼 (ms 가 단위) 데이터를 서버에 다시 fetch 하지 않음. 즉, staleTime 동안 해당 데이터는 fresh 한 상태인 것이고, staleTime 이 끝나면 해당 데이터는 stale 해지는 것.
  - e.g. 거의 동적이지 않아 정적인 데이터가 있다. -> staleTime 을 길게 설정하면 됨.

## enabled

- 이 값이 `true` 일 경우 useQuery 를 실행, `false` 일 경우 실행시키지 않음
- `undefined` 일 경우 실행 됨
